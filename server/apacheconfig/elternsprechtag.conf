<VirtualHost *:80>
    ServerName elternsprechtag.local
    DocumentRoot /var/www/html/elternsprechtag/client/dist
    ProxyPreserveHost On
    ProxyPass /api/ http://127.0.0.1:3000/api/
    ProxyPassReverse /api/ http://127.0.0.1:3000/api/
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /socket.io/(.*) ws://127.0.0.1:3000/socket.io/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /socket.io/(.*) http://127.0.0.1:3000/socket.io/$1 [P,L]
    <Proxy *>
        Require all granted
    </Proxy>
</VirtualHost>
